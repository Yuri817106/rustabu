# rustabu

本專案為演化式計算課程期末報告，計算老師所提供之問題(./src/P4/ 裡面有詳細問題結構)的最低成本排程。

## 如何使用

1. 安裝 Rust<br>
    ```bash
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
    ``` 
2. 下載和執行本專案：
   ```bash
   git clone https://github.com/Yuri817106/rustabu.git
   cd rustabu
   
   cargo run
   ```

## 研究目的與動機
本專案使用 Tabu Search 的方式來求解老師所給的問題，並使用 Plotters 來畫出收斂曲線。
對於 Tabu List 的設計則是我的動機，我曾經在課堂上提出過使用bit mask的方法來表示Tabu List，所以這專案就是驗證我所提之方法的可行性。

## 問題編碼
對於問題和解我用了結構體表示
```Rust
pub struct Problem {
    pub processor_count: usize,
    pub task_count: usize,
    pub edge_count: usize,
    pub comm_rate: Vec<Vec<f64>>,
    pub comp_cost: Vec<Vec<f64>>,
    pub trans_data_vol: Vec<(usize, usize, f64)>,
}
```
> 問題的結構

```Rust
pub struct Solution {
    pub ss: Vec<usize>,
    pub ms: Vec<usize>,
}
```
> 解的結構

## Tabu List 的設計
我使用 bit mask 的方式來表示 Tabu List，Tabu List 的長度為 問題之工作個數 / 3。
舉個例子：
```
[0, 1, 2, 3, 4] -> [0, 1, 2, 4, 3]
```
我交換了 數值3 和 數值4 的位置，所以 bit mask 就是 00011，並將這個 bit mask 推入 Tabu List。
之後的擾動如果他的 bit mask 是 00011 或是其他已經在 Tabu List 中的 bit mask，都會拒絕接受，除非解品質比目前的最佳解還好。

## 非法解的問題
我在擾動的過程中，是一定有機會產生非法解的，所以我對於非法解將會給予其一個很大的懲罰分數，並檢查是否大於等於這個懲罰分數，如果是，則拒絕接受這個解，並重新產生一個新的解。

## 實驗執行之環境
OS: macOS Sequoia 15.5 arm64<br>
CPU: Apple M4 (10) @ 4.46 GHz<br>
GPU: Apple M4 (10) @ 1.58 GHz<br>
RAM: 16.00 GiB<br>
Rust version: 1.87.0<br>

## 實驗參數
| 參數 | 值 |
| :--- | :--- |
| MAX_ITER | 300 |
| TABU_LIST_LEN | task_count / 2.5 |
| CANDIDATES_SIZE | 5 |
| TEMP | 100 |
| COOLING | 0.99 |

## 實驗結果
| 問題編號 | 最佳解 | 最差解 | 平均解 | 標準差 | 執行時間 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 0.0 | 440.00 | 490.00 | 476.00 | 50.00 | 0.0090 S |
| 0.2 | 427.30 | 496.20 | 471.12 | 68.90 | 0.0086 S |
| 0.4 | 426.50 | 442.20 | 437.94 | 15.70 | 0.0092 S |
| 0.6 | 441.50 | 472.80 | 461.96 | 31.30 | 0.0102 S |

---
第一種方法 
| 問題編號 | 最佳解 | 最差解 | 平均解 | 標準差 | 執行時間 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 0.0 | 440.0 | 440.0 | 440.0 | 0.00 | 0.4094 S |
| 0.2 | 425.1 | 438.8 | 427.8 | 6.12 | 0.4188 S |
| 0.4 | 403.3 | 426.3 | 412.3 | 8.88 | 0.3968 S |
| 0.6 | 423.2 | 423.2 | 423.2 | 0.00 | 0.4282 S |

---
第二種方法 
| 問題編號 | 最佳解 | 最差解 | 平均解 | 標準差 | 執行時間 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 0.0 | 470.0 | 510.0 | 492.0 | 14.83 | 0.2030 S |
| 0.2 | 464.5 | 500.8 | 478.4 | 16.05 | 0.2030 S |
| 0.4 | 448.5 | 489.6 | 465.7 | 16.03 | 0.2032 S |
| 0.6 | 456.8 | 561.4 | 499.9 | 45.67 | 0.2032 S |

---
第三種方法 
| 問題編號 | 最佳解 | 最差解 | 平均解 | 標準差 | 執行時間 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 0.0 | 440.0 | 460.0 | 450.0 | 10.00 | 1.2372 S |
| 0.2 | 425.1 | 435.2 | 429.1 | 4.10  | 1.6094 S |
| 0.4 | 410.8 | 431.0 | 421.3 | 8.23  | 1.5470 S |
| 0.6 | 416.4 | 435.2 | 426.2 | 7.68  | 1.4342 S |

---
第四種方法 
| 問題編號 | 最佳解 | 最差解 | 平均解 | 標準差 | 執行時間 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 0.0 | 440.0 | 460.0 | 444.0 | 8.94  | 0.5218 S |
| 0.2 | 425.1 | 425.1 | 425.1 | 0.00  | 0.7096 S |
| 0.4 | 403.3 | 432.5 | 420.4 | 14.11 | 0.6596 S |
| 0.6 | 413.8 | 436.6 | 420.2 | 10.01 | 0.5688 S |

---
第五種方法 
| 問題編號 | 最佳解 | 最差解 | 平均解 | 標準差 | 執行時間 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 0.0 | 520.0 | 520.0 | 520.0 | 0.00  | <0.001 S |
| 0.2 | 523.2 | 523.2 | 523.2 | 0.00  | <0.001 S |
| 0.4 | 495.7 | 495.7 | 495.7 | 0.00  | <0.001 S |
| 0.6 | 455.0 | 455.0 | 455.0 | 455.0 | <0.001 S |

---
第六種方法 
| 問題編號 | 最佳解 | 最差解 | 平均解 | 標準差 | 執行時間 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 0.0 | 470.0 | 510.0 | 486.0 | 21.90 | 0.9722 S | 
| 0.2 | 445.8 | 474.5 | 459.8 | 11.00 | 1.0096 S |
| 0.4 | 427.9 | 462.1 | 447.7 | 14.20 | 1.0750 S |
| 0.6 | 413.8 | 455.7 | 438.9 | 22.90 | 0.7564 S |